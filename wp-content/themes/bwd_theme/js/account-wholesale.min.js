function attachEvents(e){e.focus(function(){$(this).parent().addClass("focus")}),e.blur(function(){$(this).parent().removeClass("focus")}),e.keyup(function(){""===$(this).val()?$(this).parent().removeClass("filled"):$(this).parent().addClass("filled")}),e.parent().hasClass("select")&&e.change(function(){""!==$(this).val()?$(this).parent().addClass("filled"):$(this).parent().removeClass("filled")}),"checkbox"!==e.attr("type")&&""!==e.val()&&e.parent().addClass("filled valid")}function makeValid(e){e.addClass("valid").removeClass("invalid error")}function makeInvalid(e,i){e.addClass("invalid").removeClass("valid"),i&&e.addClass("invalid error")}function scrollUpIfNeeded(e){window.pageYOffset>e.offset().top&&$("html, body").animate({scrollTop:e.offset().top-70},300)}function saveSectionHeights(){$$(".wpcf7-form-section").each(function(){$this=$(this);var e=$this.find(".wpcf7-form-section-wrap").height()+90;$this.data("height",e)})}function revealSection(e){showSection(e),e.addClass("show"),e.siblings(".show").height(39).removeClass("show")}function showSection(e){e.height(e.data("height"))}var proceed,problem,$required,$currentStep,$previousStep,$lastField;$window.on("resize",function(){window.innerWidth<=920&&saveSectionHeights()}),$.fn.form=function(e,i){},$.fn.formPrepare=function(){saveSectionHeights(),$$("#general").addClass("show").each(function(){$this=$(this),$this.height($this.data("height")),$this.siblings().height(39)}),$$(".wpcf7-form").find(".fieldset").not(".radio, .checkbox").each(function(){$.fn.formPrepare.inputField($(this))}),$$(".wpcf7-form").find(".fieldset.checkbox").each(function(){$.fn.formPrepare.checkboxField($(this))}),$$(".wpcf7-form").find(".phone, .zip, .cardnumber, .cardcvc, .carddate").each(function(){$.fn.formPrepare.numberField($(this))}),$$(".wpcf7-form").find(".email").each(function(){$.fn.formPrepare.emailField($(this))}),$$(".wpcf7-form-section").each(function(){$lastField=$(this).find(".fieldset").not(".checkbox").last(),$lastField.on("keydown",function(e){9===e.keyCode&&e.preventDefault()})}),$$(".wpcf7-form .input").each(function(){$this=$(this),attachEvents($this)})},$.fn.formValidate=function(){proceed=!1,problem=!1,$required=$$(".wpcf7-form").find(".wpcf7-form-section.show").find(".fieldset.required"),billingSame=$$(".wpcf7-form").find(".billing .fieldset.checkbox .input-button").hasClass("checked"),$required.each(function(){$this=$(this),$this.hasClass("valid")?$this.removeClass("error"):(problem=!0,$this.addClass("error"))}),proceed=problem?!1:!0},$.fn.formNext=function(){if($currentStep=$$(".wpcf7-form").find(".wpcf7-form-section.show"),$$(".wpcf7-form").formValidate(),proceed){var e=$currentStep.next();revealSection(e),scrollUpIfNeeded(e)}},$.fn.formOpen=function(){if(!this.hasClass("show")){var e=$$(".wpcf7-form").find(".wpcf7-form-section.show");$$(".wpcf7-form").formValidate(),proceed||e.addClass("incomplete"),revealSection(this),scrollUpIfNeeded(this)}},$.fn.formBack=function(){$currentStep=$$(".wpcf7-form").find(".wpcf7-form-section.show"),$previousStep=$currentStep.prev(),revealSection($previousStep),scrollUpIfNeeded($previousStep)},$.fn.formSubmit=function(){$$(".wpcf7-form").formValidate(),proceed&&$$(".wpcf7-submit").click()},$.fn.formPrepare.inputField=function(e){e.hasClass("required")?e.find(".input").not(".phone, .email, .cardcvc, .carddate").on("change keydown",function(){""===$(this).val()||null===$(this).val()?makeInvalid($(this).parents(".fieldset")):makeValid($(this).parents(".fieldset"))}):e.addClass("valid")},$.fn.formPrepare.emailField=function(e){e.on("change keydown",function(){var e=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);""!==$(this).val()&&e.test($(this).val())?makeValid($(this).parents(".fieldset")):makeInvalid($(this).parents(".fieldset"))})},$.fn.formPrepare.checkboxField=function(e){e.find(".input-button").click(function(){$(this).hasClass("checked")?($(this).removeClass("checked"),$(this).find(".input").prop("checked",!1),$(this).hasClass("checked")||$(this).siblings().hasClass("checked")?makeValid($(this).parents(".fieldset")):makeInvalid($(this).parents(".fieldset"))):($(this).addClass("checked"),$(this).find(".checkbox").prop("checked",!0),$(this).find(".input").prop("checked",!0),makeValid($(this).parents(".fieldset")))}),e.find("label").click(function(){$(this).parent().click()})},$.fn.formPrepare.numberField=function(e){e.keydown(function(e){e.ctrlKey||e.metaKey||normalKeycodes(e)||e.preventDefault()}),e.hasClass("phone")&&e.change(function(){""===$(this).val()||$(this).val().length<7?makeInvalid($(this).parents(".fieldset")):makeValid($(this).parents(".fieldset"))}),e.hasClass("cardcvc")&&e.change(function(){""===$(this).val()||$(this).val().length<3?makeInvalid($(this).parents(".fieldset")):makeValid($(this).parents(".fieldset"))}),e.hasClass("carddate")&&e.on("keydown keypress",function(e){var i=8===e.keyCode,t=9===e.keyCode,s=e.key;e.ctrlKey||e.metaKey||(!normalKeycodes(e)||e.keyCode>=48&&e.keyCode<=57)&&e.preventDefault(),mobile&&((48===e.keyCode||96===e.keyCode)&&(s=0),(49===e.keyCode||97===e.keyCode)&&(s=1),(50===e.keyCode||98===e.keyCode)&&(s=2),(51===e.keyCode||99===e.keyCode)&&(s=3),(52===e.keyCode||100===e.keyCode)&&(s=4),(53===e.keyCode||101===e.keyCode)&&(s=5),(54===e.keyCode||102===e.keyCode)&&(s=6),(55===e.keyCode||103===e.keyCode)&&(s=7),(56===e.keyCode||104===e.keyCode)&&(s=8),(57===e.keyCode||105===e.keyCode)&&(s=9));var n=$(this),o=n.val(),a=o.length;i?a>=3&&5>=a&&(o=o.substr(0,2)):(7>=a&&!isNaN(s)&&(0===a&&1>=s&&(o+=s),0===a&&s>1&&(o=o+"0"+s),1===a&&9>=s&&("0"===o.substr(0,1)?o+=s:2>=s&&(o+=s)),2===a&&(o=o+" / "+s),3===a&&(o=o+"/ "+s),4===a&&(o=o+" "+s),(5===a||6===a)&&(o+=s),a=o.length),a>=7?makeValid($(this).parents(".fieldset")):makeInvalid($(this).parents(".fieldset"))),n.val(o)})},$$(".wpcf7-form").formPrepare(),$$(".wpcf7-form .next").on("click",function(){$$(".wpcf7-form").formNext()}),$(".wpcf7-form .submit").on("click",function(){$(".wpcf7-form").formSubmit()}),$$(".wpcf7-form .back").on("click",function(){$$(".wpcf7-form").formBack()}),$$(".wpcf7-form-section-title").on("click",function(){$(this).parent().formOpen()}),$$("#general .fieldset.checkbox").on("click",function(){$(this).find("input").change()}),$$("#general .fieldset.checkbox input").on("change",function(){$(this).prop("checked")?$$(".shipping-address.fieldset").hide(300):$$(".shipping-address.fieldset").show(300),setTimeout(function(){saveSectionHeights(),showSection($$("#general"))},300)}),$$(".wpcf7-form-buttons-item.add").on("click",function(){$this=$(this).parent(),$thisSection=$(this).parents(".wpcf7-form-section");var e=$this.siblings(".wpcf7-form-section-additional").hasClass("open");if(e)var i=$this.siblings(".wpcf7-form-section-additional.open").last().next();else var i=$this.siblings(".wpcf7-form-section-additional").first();i.addClass("open");var t=$this.siblings(".wpcf7-form-section-additional.open").length,s=$this.siblings(".wpcf7-form-section-additional").length;t===s&&$(this).remove(),saveSectionHeights(),showSection($thisSection)}),$$(".wpcf7-response-output").length&&""!==$$(".wpcf7-response-output").html()&&($$(".wpcf7-response-output").hasClass("wpcf7-mail-sent-ok")?notify("success",$$(".wpcf7-response-output").html()):notify("error",$$(".wpcf7-response-output").html()));